# ExploreWithMe


### Ссылка на пул-реквест: https://github.com/rs-popov/java-explore-with-me/pull/1


### Фича для самостоятельного проектирования

Для реализации был выбран **Администрирование, Первый вариант**
Согласно предложенной функциональности нужно добавить возможность для 
администратора добавлять конкретные локации — города, театры, концертные залы
и другие в виде координат (широта, долгота, радиус), добавить возможность получения 
списка этих локаций и возможность поиска событий в конкретной локации.

Для реализации фичи была изменента модель данных - для локаций добавлена отдельная 
сущность и соответствующая таблица в БД. 
Локация представляет собой окружность с центром lat, lon и диаметром radius, 
которая может иметь название и текстовое описание типа локации.

Добавлен класс Location, имеющий следующие поля:
* *id* — уникальный идентификатор вещи;
* *lat* — широта (согласно системе координат WGS 84); 
* *lon* — долгота (согласно системе координат WGS 84);
* *name* — название локации;
* *description* — описание типа локации;
* *radius* — диаметр области.

Реализованы следующие сценарии для работы с локациями:

* Добавление локации администратором - Происходит по эндпойнту **POST admin/location**. 
На вход поступает объект LocationInputDto. Валидация объекта проходит по полям 
lat(от -90 до +90), lon (-180 до +180), 
radius (ноль или положительные значения, значение по умолчанию - 0,1). 
Поля name и description не являются обязательными для совместимости с тестами и спецификацией основной части работы
Был изменен метод добавления событий из основной части - при добавлении события 
проверяем есть ли в таблице локация с координатами из создаваемого события, 
если локации не обнаружено - добавяется новая локация и этот объект используется 
при создании события (при этом учитываются только координаты lat и lon).

* Просмотр информации администратором конкретной локации по её идентификатору 
по эндпойнту **GET admin/location/{locId}**.

* Поиск и просмотр администратором полной информации включая расстояние до места 
обо всех сохраненных локациях, находящихся в области диаметром distance 
и центром lat,lon, с возможностью отфильтровать по названию и описанию. 
Происходит по эндпойнту  **GET admin/location/**. 
Локация считается входящей с область поиска, если вычисленная дистанция между
центром области поиска и координатами локации (вычисляется по предложенной функции в ТЗ)
меньше суммы диаметра области поиска и диаметра локации (границы не пересекаются).
Информация о найденных локациях предоставляется в виде модели LocationOutputDtoWithDistance
где помимо полей локации также находится поле distance, соответствующее расстоянию от центра 
области поиска до локации.

* Поиск и просмотр опубликованных событий, происходящих в области диаметром distance
и центром lat,lon. Происходит по эндпойнту **GET /events/loc** и доступен 
для неавторизованных пользователей. Информация о запросе событий сохраняется в статистике
